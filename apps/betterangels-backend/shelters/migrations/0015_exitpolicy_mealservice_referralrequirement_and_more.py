# Generated by Django 5.1.6 on 2025-03-13 23:15

import django_choices_field.fields
import django_ckeditor_5.fields
import pgtrigger.compiler
import pgtrigger.migrations
import phonenumber_field.modelfields
import shelters.enums
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ("shelters", "0014_modify_shelter_group_permissions"),
    ]

    operations = [
        migrations.CreateModel(
            name="ExitPolicy",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                (
                    "name",
                    django_choices_field.fields.TextChoicesField(
                        blank=True,
                        choices=[
                            ("mia", "Exit after 72 hours of being MIA"),
                            ("violence", "Exit due to violence to self or others"),
                            ("mitigation", "30 Days Mitigation plan prior to exits"),
                            ("other", "Other"),
                        ],
                        choices_enum=shelters.enums.ExitPolicyChoices,
                        max_length=10,
                        null=True,
                        unique=True,
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="MealService",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                (
                    "name",
                    django_choices_field.fields.TextChoicesField(
                        blank=True,
                        choices=[("breakfast", "Breakfast"), ("lunch", "Lunch"), ("dinner", "Dinner")],
                        choices_enum=shelters.enums.MealServiceChoices,
                        max_length=9,
                        null=True,
                        unique=True,
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="ReferralRequirement",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                (
                    "name",
                    django_choices_field.fields.TextChoicesField(
                        blank=True,
                        choices=[
                            ("referral_matched", "Matched Referral"),
                            ("referral_nonmatched", "Non-Matched Referral"),
                            ("service_provider_submission", "Service Provider Submission"),
                            ("self_referral", "Self Referral Option"),
                            ("same_day_intake", "Same Day Intake"),
                        ],
                        choices_enum=shelters.enums.ReferralRequirementChoices,
                        max_length=27,
                        null=True,
                        unique=True,
                    ),
                ),
            ],
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name="shelter",
            name="shelter_add_insert",
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name="shelter",
            name="shelter_update_update",
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name="shelter",
            name="shelter_remove_delete",
        ),
        migrations.AddField(
            model_name="shelter",
            name="add_notes_shelter_details",
            field=django_ckeditor_5.fields.CKEditor5Field(blank=True, null=True, verbose_name="Additional Notes"),
        ),
        migrations.AddField(
            model_name="shelter",
            name="add_notes_sleeping_details",
            field=django_ckeditor_5.fields.CKEditor5Field(blank=True, null=True, verbose_name="Additional Notes"),
        ),
        migrations.AddField(
            model_name="shelter",
            name="emergency_surge",
            field=models.BooleanField(blank=True, null=True, verbose_name="Emergency Capacity Surge Options"),
        ),
        migrations.AddField(
            model_name="shelter",
            name="exit_policy_other",
            field=models.CharField(blank=True, max_length=255, null=True),
        ),
        migrations.AddField(
            model_name="shelter",
            name="intake_hours",
            field=models.CharField(blank=True, max_length=255, null=True),
        ),
        migrations.AddField(
            model_name="shelter",
            name="operating_hours",
            field=models.CharField(blank=True, max_length=255, null=True),
        ),
        migrations.AddField(
            model_name="shelter",
            name="visitors_allowed",
            field=models.BooleanField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name="shelterevent",
            name="add_notes_shelter_details",
            field=django_ckeditor_5.fields.CKEditor5Field(blank=True, null=True, verbose_name="Additional Notes"),
        ),
        migrations.AddField(
            model_name="shelterevent",
            name="add_notes_sleeping_details",
            field=django_ckeditor_5.fields.CKEditor5Field(blank=True, null=True, verbose_name="Additional Notes"),
        ),
        migrations.AddField(
            model_name="shelterevent",
            name="emergency_surge",
            field=models.BooleanField(blank=True, null=True, verbose_name="Emergency Capacity Surge Options"),
        ),
        migrations.AddField(
            model_name="shelterevent",
            name="exit_policy_other",
            field=models.CharField(blank=True, max_length=255, null=True),
        ),
        migrations.AddField(
            model_name="shelterevent",
            name="intake_hours",
            field=models.CharField(blank=True, max_length=255, null=True),
        ),
        migrations.AddField(
            model_name="shelterevent",
            name="operating_hours",
            field=models.CharField(blank=True, max_length=255, null=True),
        ),
        migrations.AddField(
            model_name="shelterevent",
            name="visitors_allowed",
            field=models.BooleanField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name="entryrequirement",
            name="name",
            field=django_choices_field.fields.TextChoicesField(
                blank=True,
                choices=[
                    ("medicaid_or_medicare", "Medicaid or Medicare"),
                    ("photo_id", "Photo ID"),
                    ("referral", "Referral"),
                    ("reservation", "Reservation"),
                    ("background", "Background Check"),
                    ("homeless_verification", "Homeless Verification/Observation"),
                    ("walk_ups", "Walk-Ups"),
                    ("vehicle_registration", "Vehicle Registration/Insurance"),
                ],
                choices_enum=shelters.enums.EntryRequirementChoices,
                max_length=21,
                null=True,
                unique=True,
            ),
        ),
        migrations.AlterField(
            model_name="shelter",
            name="bed_fees",
            field=models.CharField(blank=True, max_length=255, null=True),
        ),
        migrations.AlterField(
            model_name="shelter",
            name="other_services",
            field=django_ckeditor_5.fields.CKEditor5Field(blank=True, null=True, verbose_name="Additional Notes"),
        ),
        migrations.AlterField(
            model_name="shelter",
            name="phone",
            field=phonenumber_field.modelfields.PhoneNumberField(blank=True, max_length=128, null=True, region=None),
        ),
        migrations.AlterField(
            model_name="shelter",
            name="program_fees",
            field=models.CharField(blank=True, max_length=255, null=True),
        ),
        migrations.AlterField(
            model_name="shelterevent",
            name="bed_fees",
            field=models.CharField(blank=True, max_length=255, null=True),
        ),
        migrations.AlterField(
            model_name="shelterevent",
            name="other_services",
            field=django_ckeditor_5.fields.CKEditor5Field(blank=True, null=True, verbose_name="Additional Notes"),
        ),
        migrations.AlterField(
            model_name="shelterevent",
            name="phone",
            field=phonenumber_field.modelfields.PhoneNumberField(blank=True, max_length=128, null=True, region=None),
        ),
        migrations.AlterField(
            model_name="shelterevent",
            name="program_fees",
            field=models.CharField(blank=True, max_length=255, null=True),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name="shelter",
            trigger=pgtrigger.compiler.Trigger(
                name="shelter_add_insert",
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func='INSERT INTO "shelters_shelterevent" ("add_notes_shelter_details", "add_notes_sleeping_details", "bed_fees", "city_council_district", "created_at", "curfew", "demographics_other", "description", "email", "emergency_surge", "entry_info", "exit_policy_other", "funders_other", "geolocation", "id", "intake_hours", "location", "max_stay", "name", "on_site_security", "operating_hours", "organization_id", "other_rules", "other_services", "overall_rating", "pgh_context_id", "pgh_created_at", "pgh_label", "pgh_obj_id", "phone", "program_fees", "room_styles_other", "shelter_programs_other", "shelter_types_other", "status", "subjective_review", "supervisorial_district", "total_beds", "updated_at", "visitors_allowed", "website") VALUES (NEW."add_notes_shelter_details", NEW."add_notes_sleeping_details", NEW."bed_fees", NEW."city_council_district", NEW."created_at", NEW."curfew", NEW."demographics_other", NEW."description", NEW."email", NEW."emergency_surge", NEW."entry_info", NEW."exit_policy_other", NEW."funders_other", NEW."geolocation", NEW."id", NEW."intake_hours", NEW."location", NEW."max_stay", NEW."name", NEW."on_site_security", NEW."operating_hours", NEW."organization_id", NEW."other_rules", NEW."other_services", NEW."overall_rating", _pgh_attach_context(), NOW(), \'shelter.add\', NEW."id", NEW."phone", NEW."program_fees", NEW."room_styles_other", NEW."shelter_programs_other", NEW."shelter_types_other", NEW."status", NEW."subjective_review", NEW."supervisorial_district", NEW."total_beds", NEW."updated_at", NEW."visitors_allowed", NEW."website"); RETURN NULL;',
                    hash="a4a017252cf02507eb50f5032351a81fdef6eb91",
                    operation="INSERT",
                    pgid="pgtrigger_shelter_add_insert_6bdb6",
                    table="shelters_shelter",
                    when="AFTER",
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name="shelter",
            trigger=pgtrigger.compiler.Trigger(
                name="shelter_update_update",
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    condition="WHEN (OLD.* IS DISTINCT FROM NEW.*)",
                    func='INSERT INTO "shelters_shelterevent" ("add_notes_shelter_details", "add_notes_sleeping_details", "bed_fees", "city_council_district", "created_at", "curfew", "demographics_other", "description", "email", "emergency_surge", "entry_info", "exit_policy_other", "funders_other", "geolocation", "id", "intake_hours", "location", "max_stay", "name", "on_site_security", "operating_hours", "organization_id", "other_rules", "other_services", "overall_rating", "pgh_context_id", "pgh_created_at", "pgh_label", "pgh_obj_id", "phone", "program_fees", "room_styles_other", "shelter_programs_other", "shelter_types_other", "status", "subjective_review", "supervisorial_district", "total_beds", "updated_at", "visitors_allowed", "website") VALUES (NEW."add_notes_shelter_details", NEW."add_notes_sleeping_details", NEW."bed_fees", NEW."city_council_district", NEW."created_at", NEW."curfew", NEW."demographics_other", NEW."description", NEW."email", NEW."emergency_surge", NEW."entry_info", NEW."exit_policy_other", NEW."funders_other", NEW."geolocation", NEW."id", NEW."intake_hours", NEW."location", NEW."max_stay", NEW."name", NEW."on_site_security", NEW."operating_hours", NEW."organization_id", NEW."other_rules", NEW."other_services", NEW."overall_rating", _pgh_attach_context(), NOW(), \'shelter.update\', NEW."id", NEW."phone", NEW."program_fees", NEW."room_styles_other", NEW."shelter_programs_other", NEW."shelter_types_other", NEW."status", NEW."subjective_review", NEW."supervisorial_district", NEW."total_beds", NEW."updated_at", NEW."visitors_allowed", NEW."website"); RETURN NULL;',
                    hash="48e3d71cf8bd1736f21d96b1edd59d0c0d42ee02",
                    operation="UPDATE",
                    pgid="pgtrigger_shelter_update_update_086d2",
                    table="shelters_shelter",
                    when="AFTER",
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name="shelter",
            trigger=pgtrigger.compiler.Trigger(
                name="shelter_remove_delete",
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func='INSERT INTO "shelters_shelterevent" ("add_notes_shelter_details", "add_notes_sleeping_details", "bed_fees", "city_council_district", "created_at", "curfew", "demographics_other", "description", "email", "emergency_surge", "entry_info", "exit_policy_other", "funders_other", "geolocation", "id", "intake_hours", "location", "max_stay", "name", "on_site_security", "operating_hours", "organization_id", "other_rules", "other_services", "overall_rating", "pgh_context_id", "pgh_created_at", "pgh_label", "pgh_obj_id", "phone", "program_fees", "room_styles_other", "shelter_programs_other", "shelter_types_other", "status", "subjective_review", "supervisorial_district", "total_beds", "updated_at", "visitors_allowed", "website") VALUES (OLD."add_notes_shelter_details", OLD."add_notes_sleeping_details", OLD."bed_fees", OLD."city_council_district", OLD."created_at", OLD."curfew", OLD."demographics_other", OLD."description", OLD."email", OLD."emergency_surge", OLD."entry_info", OLD."exit_policy_other", OLD."funders_other", OLD."geolocation", OLD."id", OLD."intake_hours", OLD."location", OLD."max_stay", OLD."name", OLD."on_site_security", OLD."operating_hours", OLD."organization_id", OLD."other_rules", OLD."other_services", OLD."overall_rating", _pgh_attach_context(), NOW(), \'shelter.remove\', OLD."id", OLD."phone", OLD."program_fees", OLD."room_styles_other", OLD."shelter_programs_other", OLD."shelter_types_other", OLD."status", OLD."subjective_review", OLD."supervisorial_district", OLD."total_beds", OLD."updated_at", OLD."visitors_allowed", OLD."website"); RETURN NULL;',
                    hash="b1fe58a4e53137e57c6f7f92bc0652be6cdc0d52",
                    operation="DELETE",
                    pgid="pgtrigger_shelter_remove_delete_928d6",
                    table="shelters_shelter",
                    when="AFTER",
                ),
            ),
        ),
        migrations.AddField(
            model_name="shelter",
            name="exit_policy",
            field=models.ManyToManyField(to="shelters.exitpolicy"),
        ),
        migrations.AddField(
            model_name="shelter",
            name="meal_services",
            field=models.ManyToManyField(to="shelters.mealservice"),
        ),
        migrations.AddField(
            model_name="shelter",
            name="referral_requirement",
            field=models.ManyToManyField(to="shelters.referralrequirement"),
        ),
    ]
