# Generated by Django 6.0.1 on 2026-01-13

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ("shelters", "0022_city_overhaul"),
    ]

    operations = [
        # Drop the old name field (which had enum values)
        migrations.RemoveField(
            model_name="city",
            name="name",
        ),
        # Rename display_name to name (human-readable names become primary)
        migrations.RenameField(
            model_name="city",
            old_name="display_name",
            new_name="name",
        ),
        migrations.AlterModelOptions(
            name="city",
            options={"ordering": ["name"], "verbose_name_plural": "Cities"},
        ),
        # Add case-insensitive unique constraint for shelter names
        migrations.RunSQL(
            sql="CREATE UNIQUE INDEX shelter_name_ci_unique ON shelters_shelter (LOWER(name))",
            reverse_sql="DROP INDEX IF EXISTS shelter_name_ci_unique",
        ),
    ]
